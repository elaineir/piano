(()=>{"use strict";var e={KeyQ:!1,KeyW:!1,KeyE:!1,Digit2:!1,Digit3:!1,KeyR:!1,KeyT:!1,KeyY:!1,KeyU:!1,Digit5:!1,Digit6:!1,Digit7:!1,KeyI:!1,KeyO:!1,KeyP:!1,Digit9:!1,Digit0:!1,KeyZ:!1,KeyX:!1,KeyC:!1,KeyV:!1,KeyS:!1,KeyD:!1,KeyF:!1,KeyB:!1,KeyN:!1,KeyM:!1,KeyH:!1,KeyJ:!1,Comma:!1,Period:!1,Slash:!1,Quote:!1,KeyL:!1,Semicolon:!1,BracketLeft:!1},t=document.querySelector(".fullscreen"),n=document.querySelector(".page"),o=document.querySelector(".piano"),c=document.querySelectorAll(".piano__key"),r=document.querySelector(".button_type_notes"),u=document.querySelector(".button_type_letters"),i=document.querySelector(".button_type_nomarks"),a=document.querySelector(".controls__checkbox_rec"),d=function(e,t){return e.classList.add(t)},s=function(e,t){return e.classList.remove(t)},y=function(e){e.target!==r||r.classList.contains("button_active")||(c.forEach((function(e){return e.querySelector(".piano__note").textContent=e.dataset.note})),d(r,"button_active"),s(u,"button_active"),s(i,"button_active")),e.target!==u||u.classList.contains("button_active")||(c.forEach((function(e){return e.querySelector(".piano__note").textContent=e.dataset.letter})),d(u,"button_active"),s(r,"button_active"),s(i,"button_active")),e.target!==i||i.classList.contains("button_active")||(c.forEach((function(e){return e.querySelector(".piano__note").textContent=""})),d(i,"button_active"),s(r,"button_active"),s(u,"button_active"))};r.addEventListener("click",y),u.addEventListener("click",y),i.addEventListener("click",y);var l=function(t){var n;if("keydown"===t.type){if(!Object.keys(e).some((function(e){return e===t.code})))return;if(e[t.code])return;n=document.querySelector("button[data-key='".concat(t.code,"']")),e[t.code]=!0}else n=t.target;if(n.classList.contains("piano__key")){x(n);var o=document.querySelector("audio[data-note='".concat(n.dataset.note,"']"));o.volume=.2,o.currentTime=0,o.play(),!0===a.checked&&(k.push(n.dataset.note),h())}},_=function(t){var n;if("keyup"===t.type){if(!Object.keys(e).some((function(e){return e===t.code})))return;n=document.querySelector("button[data-key='".concat(t.code,"']")),e[t.code]=!1}else n=t.target;n.classList.contains("piano__key")&&C(n)},m=function e(t){_(t),o.removeEventListener("mouseover",l),document.removeEventListener("mouseup",e)};o.addEventListener("mousedown",(function(e){l(e),o.addEventListener("mouseover",l),document.addEventListener("mouseup",m)})),o.addEventListener("mouseout",_),document.addEventListener("keydown",l),document.addEventListener("keyup",_),t.addEventListener("click",(function(){document.fullscreenElement?document.exitFullscreen():n.requestFullscreen()}));var v=document.querySelector(".cntrls-button_type_reset"),p=document.querySelector(".cntrls-button_type_play"),f=document.querySelector(".cntrls-button_type_stop"),S=document.querySelector(".cntrls-button_type_backspace"),q=document.querySelector(".notes-recorder__notes"),L=document.querySelector(".button_type_toggle-recorder"),b=document.querySelector(".recorder-section"),k=[],E=!1,K=!1,g=document.querySelector(".recorder-section__range"),h=function(){q.textContent=k.join(" ")},x=function(e){var t=e.querySelector(".piano__note");d(e,"piano__key_active"),d(t,"piano__note_active")},C=function(e){var t=e.querySelector(".piano__note");s(e,"piano__key_active"),s(t,"piano__note_active")};v.addEventListener("click",(function(){if(document.querySelector(".piano__key_active")){var e=document.querySelector(".piano__key_active");C(e)}k=[],K=!1,h()})),S.addEventListener("click",(function(){k.pop(),h()})),p.addEventListener("click",(function(){if(k.length>0){K=!0;var e=1,t=g.value,n=document.querySelector("button[data-note='".concat(k[0],"']")),o=new Audio(document.querySelector("audio[data-note='".concat(k[0],"']")).src);o.volume=.2,o.currentTime=0,x(n),o.play(),o.addEventListener("timeupdate",(function c(){if(E)return C(n),o.removeEventListener("timeupdate",c),K=!1,void(E=!1);o.currentTime>t&&(t=g.value,e<k.length&&(e===k.length-1?(o.src=document.querySelector("audio[data-note='".concat(k[e],"']")).src,C(n),n=document.querySelector("button[data-note='".concat(k[e],"']")),x(n),setTimeout((function(){C(n),K=!1}),1e3),o.play(),o.removeEventListener("timeupdate",c)):(o.src=document.querySelector("audio[data-note='".concat(k[e],"']")).src,o.currentTime=0,C(n),n=document.querySelector("button[data-note='".concat(k[e],"']")),x(n),o.play(),e++)))}))}})),f.addEventListener("click",(function(){if(!E&&K)return E=!0})),L.addEventListener("click",(function(){b.classList.contains("recorder-section_hidden")?(s(b,"recorder-section_hidden"),L.textContent="hide"):(d(b,"recorder-section_hidden"),L.textContent="show")}))})();